<div class="wrapper main-content-eventos">
  <!-- Encabezado -->
  <div class="header-home-eventos"></div>

  <div class="body-eventos">
    <!-- Títulos de bienvenida -->
    <div class="row mt-5 mb-5">
      <div class="col-12">
        <span class="title-perfil">Bienvenido {{ name_user }}</span>
        <br>
        <span class="title-perfil">{{ rol }}</span>
      </div>
    </div>

    <!-- Contenedor de la tabla -->
    <div class="container">
      <div class="row mt-3 mb-5" style="text-align: center;">
        <div class="col-12">
          <div class="alert alert-primary" role="alert">
            <span class="title-table">Lista de Eventos Académicos Registrados</span>
          </div>
        </div>

        <!-- Tabla de eventos -->
        <ng-container *ngIf="lista_eventos.length > 0; else noData">
          <div class="table-scroll-wrapper">
            <div class="mat-elevation-z8">
              <!-- Barra de búsqueda -->
              <div style="display:flex; justify-content: flex-end; margin-bottom:12px;">
                <mat-form-field appearance="outline" style="width:320px;">
                  <mat-label>Buscar por nombre</mat-label>
                  <input matInput (keyup)="applyFilter($event)" placeholder="Nombre del evento">
                </mat-form-field>
              </div>

              <!-- Tabla -->
              <table mat-table [dataSource]="dataSource" matSort style="min-width: 1200px; width: 100%;">

                <!-- Columna: Nombre del evento -->
                <ng-container matColumnDef="nombre_evento">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre del Evento </th>
                  <td mat-cell *matCellDef="let element"> {{ element.nombre_evento }} </td>
                </ng-container>

                <!-- Columna: Tipo de evento -->
                <ng-container matColumnDef="tipo_evento">
                  <th mat-header-cell *matHeaderCellDef> Tipo </th>
                  <td mat-cell *matCellDef="let element"> {{ element.tipo_evento }} </td>
                </ng-container>

                <!-- Columna: Fecha de realización -->
                <ng-container matColumnDef="fecha_realizacion">
                  <th mat-header-cell *matHeaderCellDef> Fecha </th>
                  <td mat-cell *matCellDef="let element"> {{ element.fecha_realizacion | date:'dd/MM/yyyy' }} </td>
                </ng-container>

                <!-- Columna: Hora de inicio -->
                <ng-container matColumnDef="hora_inicio">
                  <th mat-header-cell *matHeaderCellDef> Hora </th>
                  <td mat-cell *matCellDef="let element"> {{ element.hora_inicio }} - {{ element.hora_final }} </td>
                </ng-container>

                <!-- Columna: Lugar -->
                <ng-container matColumnDef="lugar">
                  <th mat-header-cell *matHeaderCellDef> Lugar </th>
                  <td mat-cell *matCellDef="let element"> {{ element.lugar }} </td>
                </ng-container>

                <!-- Columna: Responsable -->
                <ng-container matColumnDef="responsable_evento">
                  <th mat-header-cell *matHeaderCellDef> Responsable </th>
                  <td mat-cell *matCellDef="let element"> {{ element.responsable_evento }} </td>
                </ng-container>

                <!-- Columna: Cupo máximo -->
                <ng-container matColumnDef="cupo_maximo_asistentes">
                  <th mat-header-cell *matHeaderCellDef> Cupo </th>
                  <td mat-cell *matCellDef="let element"> {{ element.cupo_maximo_asistentes }} </td>
                </ng-container>

                <!-- Columna: Acciones -->
                <ng-container matColumnDef="acciones">
                  <th mat-header-cell *matHeaderCellDef> Acciones </th>
                  <td mat-cell *matCellDef="let element">
                    <button
                      mat-mini-fab
                      color="primary"
                      (click)="editarEvento(element)"
                      matTooltip="Editar evento"
                      style="margin-right: 8px;">
                      <mat-icon>edit</mat-icon>
                    </button>
                    <button
                      mat-mini-fab
                      color="warn"
                      (click)="eliminarEvento(element)"
                      matTooltip="Eliminar evento">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>

              <!-- Paginador -->
              <mat-paginator
                [pageSizeOptions]="[5, 10, 20]"
                showFirstLastButtons>
              </mat-paginator>
            </div>
          </div>
        </ng-container>

        <!-- Mensaje cuando no hay datos -->
        <ng-template #noData>
          <div class="col-12">
            <div class="alert alert-warning" role="alert">
              <p style="font-size: 18px; margin: 0;">
                <mat-icon style="vertical-align: middle;">info</mat-icon>
                No hay eventos registrados en el sistema
              </p>
              <button
                mat-raised-button
                color="primary"
                (click)="router.navigate(['/eventos-academicos'])"
                style="margin-top: 15px;">
                <mat-icon>add</mat-icon>
                Registrar Nuevo Evento
              </button>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
